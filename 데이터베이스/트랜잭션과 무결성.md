# 트랜잭션
- 데이터베이스에서 하나의 논리적 기능을 수행하기 위한 작업의 단위
- 쿼리들을 하나로 묶는 단위

# 트랜잭션의 특징(ACID)
- 원자성(Atomicity): 트랜잭션과 관련된 일이 모두 수행되었거나 되지 않았거나를 보장 `all or nothing`
- 일관성(Consistency): '허용된 방식'으로만 데이터를 변경해야 함
- 격리성(Isolation) : 트랜잭션 수행 시 서로 끼어들지 못함
- 지속성(Durability): 트랜잭션이 성공하면 결과는 영구히 반영되어야 함

# 무결성
- 데이터의 정확성, 일관성, 유효성을 유지하는 것

| 이름 | 설명 |
| --- | ---|
| 개체 무결성 | 기본키로 선택된 필드는 빈 값을 허용하지 않는다. |
| 참조 무결성 | 서로 참조 관계에 있는 두 테이블의 데이터는 항상 일관된 값을 유지한다. |
| 고유 무결성 | 특정 속성에 대해 고유한 값을 가지도록 조건이 주어지면 그렇게 한다. |
| NULL 무결성 | 특정 속성 값이 NULL이 올 수 없다는 제약 조건. |

### ----------- 여기부터는 심화 내용 ------------
# 커밋
- 여러 퀴리가 성공적으로 처리되었다고 확정하는 명령어
- "커밋이 수행되었다."=="하나의 트랜잭션이 성공적으로 수행되었다."
![트랜잭션_커밋(COMMIT)](https://github.com/SSAFYSEOUL06CSSTUDY/06CSSTUDY/assets/50236187/afb2f0bb-d57b-4da2-9fa6-ed55474361a8)

# 롤백
- 트랜잭션으로 처리한 하나의 묶음 과정을 일어나기 전으로 돌리는 일
![트랜잭션_롤백(ROLLBACK)](https://github.com/SSAFYSEOUL06CSSTUDY/06CSSTUDY/assets/50236187/0c1e6e02-bca0-4d3f-af47-9c53e394c531)

# 커밋과 롤백의 장점
- 데이터 무결성이 보장된다.
- 영구적으로 변경하기 전에 데이터의 변경사항을 확인할 수 있다.
- 논리적으로 연관된 작업을 그룹화할 수 있다.


# 트랜잭션의 격리 수준(Transaction Isolation Level)
- 여러 트랜잭션이 동시에 처리될 때, 특정 트랜잭션이 다른 트랜잭션에서 변경하거나 조회하는 데이터를 볼 수 있게 허용할지 여부를 결정하는 것
- 자동 커밋(AUTO COMMIT)이 false인 상태에서만 발생
- 격리 수준이 높은 순 : SERIALIZABLE, REPEATABLE READ, READ COMMITTED, READ UNCOMMITED

## SERIALIZABLE
- 가장 엄격한 격리 수준으로, 이름 그대로 트랜잭션을 순차적으로 진행
- 여러 트랜잭션이 동일한 레코드에 동시 접근할 수 없으므로, 어떠한 데이터 부정합 문제도 발생하지 않는다.
- 하지만 트랜잭션이 순차적으로 처리되어야 하므로 동시 처리 성능이 매우 떨어진다.

## REPEATABLE READ
- 한 트랜잭션이 수정한 행을 다른 트랜잭션이 수정할 수 없도록 막아주지만 새로운 행을 추가하는 것은 막지 않는다.
- 한 트랜잭션 내에서 동일한 결과를 보장하지만, 새로운 레코드가 추가되는 경우에 부정합이 생길 수 있다.
- 트랜잭션이 끝나기 전에 다른 트랜잭션에 의해 추가된 레코드가 발견될 수 있다. 이것을 팬텀 리드(Phantom Read)라 한다.

## READ COMMITTED
- 커밋된 데이터만 조회 가능
- 가장 많이 사용되는 격리 수준
- 어떤 트랜잭션이 접근한 행을 다른 트랜잭션이 수정할 수 있다. 이 때문에 같은 트랜잭션을 다시 읽을 때 다른 내용이 발견될 수 있다.(반복 가능하지 않은 조회 non-repeatable read)

## READ UNCOMMITED
- 커밋하지 않은 데이터 조차도 접근할 수 있는 격리 수준
- 가장 낮은 격리 수준
- 트랜잭션의 작업이 완료되지 않았는데도, 다른 트랜잭션에서 볼 수 있는 부정합 문제가 발생할 수 있다.(더티 리드 Dirty read)

|이름|Dirty Read|Non-Repeatable Read|Phantom Read|
|---|---|---|---|
|SERIALIZABLE|x|x|x|
|REPEATABLE READ|x|x|o|
|READ COMMITTED|x|o|o|
|READ UNCOMMITED|o|o|o|
