# 4.7 조인의 원리 
조인의 원리 3가지
1. 중첩 루프 조인
2. 정렬 병합 조인
3. 해시 조인

### 4.7.1 중첩 루프 조인
중첩 루프 조인은 중첩 for문과 같은 원리로 조건에 맞는 조인을 하는 방법. <br>
순차적으로 처리된다. <br>
작은 입력을 인덱스를 사용하여 조인할때 가장 효율적인 성능을 보인다. 

ex) t1,t2 테이블을 조인한다. <br>
=> 첫번째 테이블에서 행을 한번에 하나씩 읽고, 그 다음 테이블에서도 행을 하나씩 읽어 조건에 맞는 레코드를 찾아 결괏값을 반환한다. 

중첩 루프 조인에서 발전 <br>
=>  블록 중첩 루프 조인 방식 : 조인할 테이블을 작은 블록으로 나눠서 블록 하나씩 조인 

### 4.7.2 정렬 병합 조인 
각각의 테이블을 조인할 필드 기준으로 정렬하고 정렬이 끝난 이후에 조인 작업을 수행하는 조인.

[process]  <br>
소트머지 조인은 두 테이블을 각각 조건에 맞게 먼저 읽는다. <br>
읽은 두 테이블을 조인 컬럼을 기준으로 정렬해놓고, 조인을 수행한다.  <br>
주로 조인 조건 칼럼에 인덱스가 없거나, 출력해야 할 결과 값이 많을 때 사용된다.

1. ACCESS하는 속도를 향상시킨다. 
2. 정렬 속도의 향상
3. 양쪽의 정렬까지 완료되는 속도를 맞춘다.
4. Sort_area_size 최적화 

### 4.7.3 해시 조인 
해시 테이블을 기반으로 조인하는 방법. <br>
인덱스를 사용할 수 없는 환경에서 결과를 정렬할 필요가 없을 때 효율적으로 사용할 수 있는 조인방법. <br>
결과를 정렬할 필요가 있다면 머지 조인이 더 효율적이다. <br>
두개의 테이블을 조인한다고 했을 때 하나의 테이블이 메모리에 완전히 들어간다면 보통 중첩 루프 조인보다 더 효율적이다. <br>

소트 머지 조인과 NL조인이 효과적이지 못한 상황에 대한 대안으로 개발되었다. <br>
해시 조인은 둘 중 작은 집합(Build input)을 읽어 Hash Area에 해시 테이블을 생성하고, 반대쪽 큰 집합(Probe input)을 읽어 해시 테이블을 담색하면서 조인하는 방식.

MySQL의 해시 조인 단계는 빌드 단계, 프로브 단계로 나뉜다. 

##### 빌드 단계 
빌드 단계는 입력 테이블 중 하나를 기반으로 메모리 내 해시 테이블을 빌드하는 단계.

##### 프로브 단계 
프로브 단계 동안 레코드 읽기를 시작한다. 
