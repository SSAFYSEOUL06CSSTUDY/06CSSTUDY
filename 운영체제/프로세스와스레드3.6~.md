### 목차

1. [**스레드와 멀티스레딩**](#1-스레드와-멀티스레딩)
2. [**공유자원과 임계 영역**](#2-공유자원과-임계-영역)
3. [**교착 상태**](#3-교착-상태)

# 1. 스레드와 멀티스레딩

> ## 스레드(Thread)

- 스레드는 "프로세스의 가장 작은 단위" 라고 정의
- 프로세스는 하나 이상의 스레드로 구성되어 있음
- 한 프로세스에 속해 있는 스레드들은 코드, 데이터, 힙 영역의 메모리를 서로 공유(스택은 제외), 이를 통해 스레드 간 데이터 공유가 가능

> ## 멀티스레딩(Multi-threading)
>
> 하나의 프로세스 내에서 여러 스레드를 생성하여 동시에 작업을 수행하는 것

- 하나의 프로그램에서 여러 개의 스레드를 동시에 실행하는 것
- 스레드 간 데이터 공유가 가능하여 효율적인 프로그램을 작성할 수 있음
- 동일한 프로세스 내의 스레드들은 IPC를 사용하지 않고도 메모리를 통해 서로 통신 가능
- 단, 스레드 간 데이터 공유로 인한 문제점이 발생할 수 있음 (경쟁 상태, 교착 상태)
  <br/>
  <br/>

> ## 멀티프로세싱(Multi-processing)과의 비교
<img width="900" src="https://github.com/SSAFYSEOUL06CSSTUDY/06CSSTUDY/assets/108852263/33b6d056-3567-40b4-b155-62a722004828">
<br/>
<br/>

| 구분            | 멀티스레딩(Multi-threading)                              | 멀티프로세싱(Multi-processing)                                                               |
| --------------- | -------------------------------------------------------- | -------------------------------------------------------------------------------------------- |
| 정의            | 하나의 프로세스에서 여러 스레드를 동시에 실행            | 여러 개의 프로세스를 동시에 실행                                                             |
| 메모리공유      | 하나의 프로세스 내의 스레드들은 메모리를 공유(스택 제외) | 각 프로세스는 자신만의 메모리 영역을 가짐<br/>선택적으로 데이터 공유를 위한 공유 메모리 사용 |
| 데이터공유      | 스레드간 데이터 공유가 가능, 하지만 관리가 필요          | 프로세스간 데이터 공유는 별도의 방법(IPC, 공유 메모리)이 필요                                |
| 컨텍스트 스위칭 | 상대적으로 빠름                                          | 상대적으로 느림                                                                              |
| 자원 소모       | 상대적으로 적게 소모                                     | 상대적으로 많이 소모                                                                         |
| 안정성          | 스레드 중 하나가 실패하면 전체 프로세스가 영향을 받음    | 각 프로세스는 독립적이므로 하나가 실패해도 다른 프로세스에 영향을 주지 않음                  |

  <br/>
  <br/>

# 2. 공유자원과 임계 영역

> ## 공유자원(Shared Resource)

- 여러 개의 스레드나 프로세스가 동시에 접근할 수 있는 자원
- 예: 변수, 메모리, 파일 등

> ## 임계 영역(Critical Section)

- 한 번에 한 스레드(또는 프로세스)만 실행할 수 있는 코드 영역
- 공유자원에 대한 접근이 필요한 부분을 임계 영역으로 설정하여 다른 스레드가 접근하지 못하게 함
- 임계 영역을 관리하기 위해 다양한 동기화 기법이 사용됨 (e.g. 세마포어, 뮤텍스)
  <br/>
  <br/>

## ⚠️ 주의

### 세마포어와 뮤택스의 작동방식은 참고용입니다. 어디에 왜 사용하는지만 이해하면 좋습니다.

> ## 세마포어(Semaphore)

- 세마포어는 정수 값을 가진 변수로, 두 개의 표준 연산, P(Proberen, 시도)와 V(Verhogen, 증가)로 조작
- P 연산은 세마포어 값을 감소시키고, V 연산은 세마포어 값을 증가
- 세마포어 값이 0 이하면, P 연산을 호출한 스레드는 block 상태로 만들어져서 다른 스레드가 작업을 수행할 수 있음

> ## 뮤텍스(Mutex)

- 뮤텍스(Mutex)는 mutual exclusion(상호 배제)의 약자로, 한 번에 하나의 스레드만 공유자원에 접근할 수 있도록 제한하는 락(lock) 메커니즘
- 뮤텍스는 임계영역에 들어가기 전에 lock을 획득하고, 나가면서 lock을 해제
- 이미 lock이 획득된 상태에서 다른 스레드가 lock을 획득하려고 하면, 그 스레드는 block 상태로 만들어짐
  <br/>
  <br/>

# 3. 교착 상태

> ## 교착 상태(Deadlock)
<img width="600" src="https://github.com/SSAFYSEOUL06CSSTUDY/06CSSTUDY/assets/108852263/07f93f8e-e13d-4bb0-9c92-a708ded211c1">
<br/>
<br/>


- 여러 스레드나 프로세스가 서로를 기다리며 진행이 멈춰있는 상태
- 예: 스레드 A가 자원 X를 잠그고, 스레드 B가 자원 Y를 잠그었을 때, A는 Y를, B는 X를 기다리며 둘 다 진행이 멈추는 상태<br/>
      => 즉, 두 개 이상의 작업이 서로의 작업이 끝나기를 기다리고 있어 결과적으로 아무것도 완료하지 못하는 상태를 말한다. 때문에 프로세스가 진전되지 못하고 모든 프로세스가 대기 상태가 된다.
- 교착 상태의 발생 조건

  1. 상호배제(Mutual Exclusion): 자원은 한 번에 한 스레드(또는 프로세스)만 사용할 수 있음
  2. 점유와 대기(Hold and Wait): 자원을 점유한 상태에서 다른 자원을 기다림
  3. 비선점(No Preemption): 자원을 점유한 스레드(또는 프로세스)가 자원을 직접 해제할 때까지 그 자원은 해제될 수 없음
  4. 순환 대기(Circular Wait): 각 스레드(또는 프로세스)는 순환적으로 다음 스레드가 요구하는 자원을 점유하고 있음
